definitions:
  name: 'Electronic Lab Notebook schema for MOVPE-STO'
  sections:  
    Movpe_experiment:
      base_sections: 
       - ../upload/raw/base_classes.schema.archive.yaml#Experiment 
       - nomad.parsing.tabular.TableData 
      m_annotations:
        eln: 
      quantities:
        data_file:
          type: str
          description: |
            A reference to an uploaded .xlsx
          m_annotations:
            browser:
              adaptor: RawFileAdaptor
            eln:
              component: FileEditQuantity
            tabular_parser:
              comment: '#'
              mode: root
      sub_sections:
        Overview:
          section: '#/Overview'       
    Overview:
      base_sections: 
      - ../upload/raw/base_classes.schema.archive.yaml#Global 
      - nomad.parsing.tabular.TableData 
      m_annotations:
        eln: 
      quantities:
        data_file:
          type: str
          default: '#data/data_file'
          description: |
            A reference to an uploaded .xlsx
          m_annotations:
            tabular_parser:
              comment: '#'
              mode: column
            browser:
              adaptor: RawFileAdaptor 
            eln:
              component: FileEditQuantity 
        sample:
          type: str
          description: FILL
          m_annotations:
            tabular:
              name: Overview/Sample
        date:
          type: Datetime
          description: FILL
          m_annotations:
            tabular:
              name: Overview/Date
        operator:
          type: str
          description: FILL
          m_annotations:
            tabular:
              name: Overview/Operator
        film:
          type: str
          description: Film material (Material:Dopant species)
          m_annotations:
            tabular:
              name: Overview/Film
        substrate:
          type: str
          description: Substrates placed into the reactor for film growth
          m_annotations:
            tabular:
              name: Overview/Substrate
        substrate_temperature:
          type: np.float64
          unit: celsius
          description: temperature of the substrate
          m_annotations:
            tabular:
              name: Overview/Substrate T 
        carrier_gas:
          type: str
          m_annotations:
            tabular:
              name: Overview/Carrier Gas
        VI_III_ratio:
          type: str
          description: FILL THE DESCRIPTION
          m_annotations:
            tabular:
              name: Overview/VI III Ratio
        growth_time:
          type: str
          description: FILL THE DESCRIPTION
          m_annotations:
            tabular:
              name: Overview/Growth Time
        notes:
          type: str
          description: FILL THE DESCRIPTION
          m_annotations:
            tabular:
              name: Overview/Notes
    AFM_measurement:
      base_sections: 
      - ../upload/raw/base_classes.schema.archive.yaml#Measurement
      -  nomad.parsing.tabular.TableData 
      m_annotations:
        eln: 
          #  hide: ['name']
      quantities:
        name:
          type: str
          default: 'AFM Measurements'
          m_annotations:
            eln:
              component: StringEditQuantity
        data_file:
          type: str
          m_annotations:
            tabular_parser:
              # sep: ','
              path_to_data_file: '#data/data_file'
              comment: '#'
              mode: row
              target_sub_section: 
               - tasks
      sub_sections:
        tasks:
          repeats: true
          section:
            base_section: ../upload/raw/base_classes.schema.archive.yaml#Procedure_step 
            m_annotations:
              eln:
            quantities:
              sample_id:
                type: str
                m_annotations:
                  tabular:
                    name: AFMReflectanceSEM/Sample
                  eln:
                    component: StringEditQuantity
              roughness:
                type: np.float64
                unit: nanometer
                description: RMS roughness value obtained by AFM
                m_annotations:
                  tabular:
                    name: AFMReflectanceSEM/Roughness
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: nanometer
    HRXRD_measurement:
      base_sections: 
      - ../upload/raw/base_classes.schema.archive.yaml#Measurement
      - nomad.parsing.tabular.TableData 
      m_annotations:
        eln: 
          # hide: ['name']
      quantities:
        name:
          type: str
          default: 'HR XRD Measurements'
          m_annotations:
            eln:
              component: StringEditQuantity
        data_file:
          type: str
          m_annotations:
            tabular_parser:
              # sep: ','
              path_to_data_file: '#data/data_file'
              comment: '#'
              mode: row
              target_sub_section: 
               - tasks
      sub_sections:
        tasks:
          repeats: true
          section:
            base_section: ../upload/raw/base_classes.schema.archive.yaml#Procedure_step
            m_annotations:
              eln:
            quantities:
              sample_id:
                type: str
                m_annotations:
                  tabular:
                    name: HRXRD/Sample
                  eln:
                    component: StringEditQuantity
              datetime:
                type: Datetime
                m_annotations:
                  tabular:
                    name: HRXRD/Timestamp
                  eln:
                    component: DateTimeEditQuantity
              method:
                type: str
                m_annotations:
                  tabular:
                    name: HRXRD/Activity Method
                  eln:
                    component: StringEditQuantity
              phase:
                type: str
                description: Phase type obtained from HRXRD 
                m_annotations:
                  tabular:
                    name: HRXRD/Phase
                  eln:
                    component: StringEditQuantity
    Growth_run:
      base_sections: 
      - ../upload/raw/base_classes.schema.archive.yaml#Activity
      -  nomad.parsing.tabular.TableData
      m_annotations:
        eln: 
      quantities:
        data_file:
          type: str
          m_annotations:
            tabular_parser:
              # sep: ','
              path_to_data_file: '#data/data_file'
              comment: '#'
              mode: row
              target_sub_section: 
               - tasks
      sub_sections:
        tasks:
          repeats: true
          section:
            base_section: ../upload/raw/base_classes.schema.archive.yaml#Procedure_step
            # more:
            #   label_quantity: step_name
            m_annotations:
              eln:
            quantities:
              name: 
                type: str
                description: what this step consists of
                m_annotations:
                  tabular:
                    name: Growthrun/Name
                  eln:
                    component: StringEditQuantity
              elapsed_time:
                type: np.float64
                unit: minute
                description: Past time since process start
                m_annotations:
                  tabular:
                    name: Growthrun/Duration
                  eln:
                    component: NumberEditQuantity #DateTimeEditQuantity
                    defaultDisplayUnit: minute
              step_number:
                type: int
                description: sequential number of the step on going
                m_annotations:
                  tabular:
                    name: Growthrun/Step
                  eln:
                    component: NumberEditQuantity
              temperature:
                type: np.float64
                unit: celsius
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/Temperature
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: celsius
              pressure:
                type: np.float64
                unit: mbar
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/Pressure
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: mbar
              TMG_bubbler_flow:
                type: np.float64
                unit: mbar
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/TMG Bubbler Flow
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: mbar
              TMG_bubbler_dilution:
                type: np.float64
                unit: cm ** 3 / minute
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/TMG Bubbler Dilution
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: cm ** 3 / minute
              TMG_inject:
                type: np.float64
                unit: cm ** 3 / minute
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/TMG Inject
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: cm ** 3 / minute
              TMG_bubbler_pressure:
                type: np.float64
                unit: mbar
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/TMG Bubbler Pressure
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: mbar
              TMG_bubbler_temperature:
                type: np.float64
                unit: mbar
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/TMG Bubbler T
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: mbar
              TMG_partial_pressure:
                type: np.float64
                unit: mbar
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/TMG Partial Pressure
                  # plot:
                  #   x: duration
                  #   y: TMG_partial_pressure
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: mbar
              flow_carrier_TMG:
                type: np.float64
                unit: cm ** 3 / minute
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: Growthrun/Flow Carrier TMG
                  eln:
                    component: NumberEditQuantity
                    defaultDisplayUnit: cm ** 3 / minute
              TMG_valve:
                type: bool
                description: is valve open? true/false
                m_annotations:
                  tabular:
                    name: Growthrun/TMG Valve
                  eln:
                    component: BoolEditQuantity
    Setup:
      base_sections: 
      - ../upload/raw/base_classes.schema.archive.yaml#Activity
      - nomad.parsing.tabular.TableData
      m_annotations:
        eln: 
      quantities:
        data_file:
          type: str
          m_annotations:
            tabular_parser:
              # sep: ','
              path_to_data_file: '#data/data_file'
              comment: '#'
              mode: row
              target_sub_section: 
               - tasks
      sub_sections:
        tasks:
          repeats: true
          section:
            base_section: ../upload/raw/base_classes.schema.archive.yaml#Procedure_step
            more:
              label_quantity: item
            m_annotations:
              eln:
            quantities:
              item: 
                type: str
                # shape: ['*']
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: SetUp/Item
                  eln:
                    component: StringEditQuantity
              temperature_bath: 
                type: str
                # shape: ['*']
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: SetUp/T bath
                  eln:
                    component: StringEditQuantity
              pressure: 
                type: str
                # shape: ['*']
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: SetUp/Pressure
                  eln:
                    component: StringEditQuantity
              percent: 
                type: str
                # shape: ['*']
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: SetUp/Percent
                  eln:
                    component: StringEditQuantity
              notes: 
                type: str
                # shape: ['*']
                description: FILL THE DESCRIPTION
                m_annotations:
                  tabular:
                    name: SetUp/Notes
                  eln:
                    component: StringEditQuantity
