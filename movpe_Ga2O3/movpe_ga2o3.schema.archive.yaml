definitions:
  name: 'Electronic Lab Notebook schema fot MOVPE-Ga2O3'
  sections:  # Schemas consist of section definitions
    Substance:
      base_section: nomad.datamodel.data.EntryData
      sub_sections:
        SampleID:
          section:
            base_sections:
              - 'nomad.datamodel.metainfo.eln.SampleID'
              - 'nomad.datamodel.data.EntryData'
            m_annotations:
              template: 
              eln: 
                # hide: ['children', 'parents']
                # hide: ['children', 'parents', institute]
                hide: []
        composition:
          repeats: true
          # m_annotations:
          #   eln:
          section: Sample
      quantities:
        comment:
          type: str
          m_annotations:
            eln:
              component: StringEditQuantity
        chemical_name:
          type: str
          description: The name of the chemical that is typically used in literature
          m_annotations:
            eln:
              component: StringEditQuantity
        iupac_name:
          type: str
          description: the IUPAC nomenclature of the chemical
          m_annotations:
            eln:
              component: StringEditQuantity
        cas_number:
          type: str
          description: CAS number
          m_annotations:
            eln:
              component: StringEditQuantity
        sku_number:
          type: str
          description: sku number
          m_annotations:
            eln:
              component: StringEditQuantity
        phase:
          type: str
          description: Phase of the chemical in the bottle
          m_annotations:
            eln:
              component: StringEditQuantity
        supplier:
          type: str
          description: Fabricating company
          m_annotations:
            eln:
              component: StringEditQuantity
        purity:
          type: str
          description: Purity of the Chemical
          m_annotations:
            eln:
              component: StringEditQuantity
        buying_date:
          type: Datetime
          description: Date of the Invoice Mail
          m_annotations:
            eln:
              component: DateTimeEditQuantity
        opening_date:
          type: Datetime
          description: Date of Opening the Chemical bottle in the Glove box
          m_annotations:
            eln:
              component: DateTimeEditQuantity
    Sample:
      base_section: nomad.datamodel.data.EntryData
      sub_sections:
        SampleID:
          section:
            base_sections:
              - 'nomad.datamodel.metainfo.eln.SampleID'
              - 'nomad.datamodel.data.EntryData'
            m_annotations:
              template: 
              eln: 
                # hide: ['children', 'parents']
                # hide: ['children', 'parents', institute]
                hide: []
        composition:
          repeats: true
          # m_annotations:
          #   eln:
          section: Sample
      quantities:
        name:
          type: str
          m_annotations:
            eln:
              component: StringEditQuantity
        method: 
          type:
            type_kind: Enum
            type_data:
              - experimental
              - simulation
              - declared_by_vendor
              - nominal
          m_annotations:
            eln:
              component: RadioEnumEditQuantity
        comment:
          type: str
          m_annotations:
            eln:
              component: StringEditQuantity
        iupac_name:
          type: str
          m_annotations:
            eln:
              component: StringEditQuantity
        empirical_formula:
          type: str
          m_annotations:
            eln:
              component: StringEditQuantity
        state_or_phase:
          type:
            type_kind: Enum
            type_data:
              - Homoepitaxy
              - Heteroepitaxy
          m_annotations:
            eln:
              component: RadioEnumEditQuantity
        supplier:
          type: str
          description: Sample preparation including orientating, polishing, cutting done by this company
          m_annotations:
            eln:
              component: StringEditQuantity
        orientation:
          type: str
          description: crystallographic orientation of the substrate in [hkl]
          m_annotations:
            eln:
              component: StringEditQuantity
        creation_datetime:
          type: Datetime
          description: creation date
          m_annotations:
            eln:
              component: DateTimeEditQuantity
        growth_method:
          type:
            type_kind: Enum
            type_data:
              - MOVPE
              - what not
          m_annotations:
            eln:
              component: RadioEnumEditQuantity
        thickness:
          type: np.float64
          unit: nanometer
          description: layer thickness
          m_annotations:
            eln:
              component: NumberEditQuantity
              defaultDisplayUnit: nanometer
    MovpeGa2O3: 
      base_sections: 
      - nomad.datamodel.data.EntryData
      - nomad.parsing.tabular.TableData
      quantities:
        data_file:
          type: str
          description: |
            A reference to an uploaded .xlsx
          m_annotations:
            # The tabular_parser annotation, will treat the values of this
            # quantity as files. It will try to interpret the files and fill
            # quantities in this section (and sub_section) with the column
            # data of .csv or .xlsx files.
            tabular_parser:
              # sep: ','
              comment: '#'
            browser:
              adaptor: RawFileAdaptor  # Allows to navigate to files in the data browser
            eln:
              component: FileEditQuantity  # A form field that allows to drop and select files.
      sub_sections:
        global:
          section:
            quantities:
              experiment_identifier:
                type: str
                m_annotations:
                  eln:
                    component: StringEditQuantity
              experiment_location:
                type: str
                m_annotations:
                  eln:
                    component: StringEditQuantity
              start_time:
                type: Datetime
                m_annotations:
                  eln:
                    component: DateTimeEditQuantity
              end_time:
                type: Datetime
                m_annotations:
                  eln:
                    component: DateTimeEditQuantity
              synthesis_category:
                type: str
                m_annotations:
                  eln:
                    component: StringEditQuantity
              synthesis_method:
                type: str
                m_annotations:
                  eln:
                    component: StringEditQuantity
        # users:
        #   section:
        #     quantities:
        #       nomad_user:
        #         type: User
        #         shape: ['*']
        #         description: my descr
        #         m_annotations:
        #           eln:
        #             component: UserEditQuantity
        #       not_nomad_user:
        #         type: Author
        #         shape: ['*']
        #         description: my descr
        #         m_annotations:
        #           eln:
        #             component: AuthorEditQuantity
        instrument:
          section:
            m_annotations:
              eln:
                dict()
        materials: 
          repeats: true
          # m_annotations:
          #   eln:
            #  dict()
          section:
            m_annotations:
              eln:
                dict()
            sub_sections:
              sample:
                repeats: true
                # m_annotations:
                #   eln:
                section: 
                  base_section: Sample
                  quantities:
                    epitaxy_type:
                      type:
                        type_kind: Enum
                        type_data:
                          - Homoepitaxy
                          - Heteroepitaxy
                      m_annotations:
                        eln:
                          component: RadioEnumEditQuantity
                    substrate:
                      type: Sample
                      # shape: ['*']
                      m_annotations:
                        eln:
                          component: ReferenceEditQuantity
        growth_recipe:
          section:
            quantities:
              experiment_identifier:
                type: str
                m_annotations:
                  # The tabular annotation defines a mapping to column headers used in
                  # tabular data files
                  tabular:
                    name: Overview/Experiment Identifier
                  eln:
                    component: StringEditQuantity
              experiment_location:
                type: str
                m_annotations:
                  tabular:
                    name: Overview/Experiment Location
                  eln:
                    component: StringEditQuantity
              start_time:
                type: Datetime
                m_annotations:
                  tabular:
                    name: Overview/Start Time
                  eln:
                    component: DateTimeEditQuantity
              end_time:
                type: Datetime
                m_annotations:
                  tabular:
                    name: Overview/End Time
                  eln:
                    component: DateTimeEditQuantity
              process_category:
                type: str
                m_annotations:
                  tabular:
                    name: Overview/Synthesis Category
                  eln:
                    component: StringEditQuantity
              process_method:
                type: str
                m_annotations:
                  tabular:
                    name: Overview/Synthesis Method
                  eln:
                    component: StringEditQuantity
            sub_sections:
              process_steps:
                section:
                  # repeats: true
                  # base_section: nomad.parsing.tabular.TableData
                  m_annotations:
                    eln:
                    # plot:
                    # - label: Vaporazation Temperature
                    #   x: elapsed_time
                    #   y:     
                    #     - "./vaporization_temperature_titan"
                    #     - "./vaporization_temperature_strontium_lanthan"
                    #   lines:
                    #   - mode: lines
                    #     line:
                    #       color: rgb(40, 80, 130)
                    #   - mode: lines
                    #     line:
                    #       color: rgb(100, 0, 0)
                    # - label: Peristalic Pump Rotation
                    #   x: elapsed_time
                    #   y:     
                    #     - "./peristaltic_pump_rotation_titan"
                    #     - "./peristaltic_pump_rotation_strontium_lanthan"
                    #   lines:
                    #   - mode: markers
                    #     marker:
                    #       color: rgb(40, 80, 130)
                    #   - mode: markers
                    #     marker:
                    #       color: rgb(100, 0, 0)
                    #   # layout:
                    #   #   xaxis:
                    #   #     title: time 
                    #   #   yaxis:
                    #   #     title: P (GPa)
                    #   #     type: log
                    
                    # - label: Gas Flow
                    #   x: elapsed_time
                    #   y:
                    #     - "./argon_flow"
                    #     - "./oxygen_flow"
                    #   lines:
                    #   - mode: lines
                    #     marker:
                    #       color: rgb(40, 80, 130)
                    #   - mode: lines
                    #     line:
                    #       color: rgb(100, 0, 0)
                  quantities:
                    process_type:
                      type:
                        type_kind: Enum
                        type_data:
                          - Pre-process
                          - Process
                          - Post-process
                          - Measurement
                          - Storage
                      m_annotations:
                        eln:
                          component: EnumEditQuantity
                    step_duration:
                      type: np.float64
                      unit: minute
                      shape: ['*']
                      description: Past time since process start
                      m_annotations:
                        tabular:
                          name: Processdata/Duration
                        # eln:
                        #   component: NumberEditQuantity #DateTimeEditQuantity
                        #  defaultDisplayUnit: minute
                    elapsed_time:
                      type: np.float64
                      unit: minute
                      shape: ['*']
                      description: Duration of each step
                      m_annotations:
                        tabular:
                          name: Processdata/Timestamp
                          unit: minute
                        # eln:
                        #   component: NumberEditQuantity
                        #   defaultDisplayUnit: minute
                    step_number:
                      type: int
                      shape: ['*']
                      description: sequential number of the step on going
                      m_annotations:
                        tabular:
                          name: Processdata/Step
                    #     eln:
                    #       component: NumberEditQuantity
                    step_title: 
                      type: str
                      shape: ['*']
                      description: what this step consists of
                      m_annotations:
                        tabular:
                          name: Processdata/Reason
                    #     eln:
                    #       component: StringEditQuantity
                    step_comment:
                      type: str
                      shape: ['*']
                      description: more verbose description of the step
                      m_annotations:
                        tabular:
                          name: Processdata/Description
                    #     eln:
                    #       component: StringEditQuantity 
                    step_annotation:
                      type: str
                      shape: ['*']
                      description: final remarks on the step
                      m_annotations:
                        tabular:
                          name: Processdata/Annotations
                    #     eln:
                    #       component: StringEditQuantity 
                    argon_flow:
                      type: np.float64
                      shape: ['*']
                      unit: centimeter ** 3 / minute
                      description: Argon process gas flow in to the reaction chamber
                      m_annotations:
                        tabular:
                          name: Processdata/Argon flow
                          unit: centimeter ** 3 / minute 
                        plot:
                          x: elapsed_time
                          y: argon_flow
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: centimeter ** 3 / minute
                    oxygen_flow:
                      type: np.float64
                      shape: ['*']
                      unit: centimeter ** 3 / minute
                      description: Oxygen process gas flow in to the reaction chamber
                      m_annotations:
                        tabular:
                          name: Processdata/Oxygen flow
                        plot:
                          x: elapsed_time
                          y: oxygen_flow
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: centimeter ** 3 / minute
                    argon_push_titan:
                      type: np.float64
                      shape: ['*']
                      unit: centimeter ** 3 / minute
                      description: Argon gas in the flash evaporator used to push Ti-Precursor into the reaction chamber
                      m_annotations:
                        tabular:
                          name: Processdata/Argon push Titan
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: centimeter ** 3 / minute
                    argon_purge_titan:
                      type: np.float64
                      shape: ['*']
                      unit: centimeter ** 3 / minute
                      description: Argon gas in the flash evaporator used to purge Ti-Precursor
                      m_annotations:
                        tabular:
                          name: Processdata/Argon purge Titan
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: centimeter ** 3 / minute
                    vaporization_temperature_titan:
                      type: np.float64
                      shape: ['*']
                      unit: celsius
                      description: Temperature in the flash evaporation to vaporize the Ti-precursor solution
                      m_annotations:
                        tabular:
                          name: Processdata/Vaporization temperature Titan
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: celsius
                    chamber_pressure:
                      type: np.float64
                      shape: ['*']
                      unit: millibar
                      description: Pressure applied in the reaction chamber
                      m_annotations:
                        tabular:
                          name: Processdata/Chamber pressure
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: millibar
                    substrate_temperature_filament:
                      type: np.float64
                      shape: ['*']
                      unit: celsius
                      description: Temperature applied on the filament in the reaction chamber 
                      m_annotations:
                        tabular:
                          name: Processdata/Substrate temperature
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: celsius
                    shaft_temperature:
                      type: np.float64
                      shape: ['*']
                      unit: celsius
                      description: Temperature applied on the shaft in the reaction chamber 
                      m_annotations:
                        tabular:
                          name: Processdata/Shaft temperature 
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: celsius
                    carrier_rotation:
                      type: np.float64
                      shape: ['*']
                      unit: rpm
                      description: Rotation velocity of the carrier with substrates
                      m_annotations:
                        tabular:
                          name: Processdata/Carrier rotation
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: rpm
                    peristaltic_pump_rotation_titan: 
                      type: np.float64
                      shape: ['*']
                      unit: rpm
                      description: Pumping velocity of the peristaltic pump of Ti
                      m_annotations:
                        tabular:
                          name: Processdata/Peristaltic pump rotation Titan
                    #     eln:
                    #       component: NumberEditQuantity
                    #       defaultDisplayUnit: rpm
              HR_XRD_measurements:
                section:
                  quantities:
                    thickness:
                      type: np.float64
                      unit: nanometer
                      description: Film thickness obtained from HRXRD
                      m_annotations:
                        tabular:
                          name: HR XRD/Thickness
                        eln:
                          component: NumberEditQuantity
                          defaultDisplayUnit: nanometer
                    d_vert:
                      type: np.float64
                      unit: angstrom
                      description: "Vertical lattice parameter d_vert obtained from HRXRD"
                      m_annotations:
                        tabular:
                          name: HR XRD/d Vertical
                        eln:
                          component: NumberEditQuantity
                          defaultDisplayUnit: angstrom
              AFM_measurements:
                section:
                  quantities:
                    roughness:
                      type: np.float64
                      unit: nanometer
                      description: RMS roughness value obtained by AFM
                      m_annotations:
                        tabular:
                          name: AFM/Roughness
                        eln:
                          component: NumberEditQuantity
                          defaultDisplayUnit: nanometer
